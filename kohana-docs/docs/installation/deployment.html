<html xmlns="http://www.w3.org/1999/xhtml" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr" xml:lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>
    installation:deployment    [Kohana User Guide]
</title><meta name="generator" content="DokuWiki Release 2008-05-05"><meta name="robots" content="index,follow"><meta name="date" content="2008-10-09T08:24:28-0500"><meta name="keywords" content="installation,deployment"><link rel="search" type="application/opensearchdescription+xml" href="..\lib\exe\opensearch.html" title="Kohana User Guide"><link rel="start" href="/"><link rel="contents" href="deployment-1.html?do=index" title="Index"><link rel="alternate" type="application/rss+xml" title="Recent Changes" href="..\feed.html"><link rel="alternate" type="application/rss+xml" title="Current Namespace" href="..\feed-7.html?mode=list&amp;ns=installation"><link rel="alternate" type="text/html" title="Plain HTML" href="..\_export\xhtml\installation\deployment.html"><link rel="alternate" type="text/plain" title="Wiki Markup" href="..\_export\raw\installation\deployment.html"><link rel="stylesheet" media="all" type="text/css" href="..\_css\all.css"><link rel="stylesheet" media="screen" type="text/css" href="..\_css\kohana.css"><link rel="stylesheet" media="print" type="text/css" href="..\_css\print.css"><script type="text/javascript" charset="utf-8" src="..\_js\script.js"></script><link rel="shortcut icon" href="..\lib\tpl\kohana\images\favicon.html"><link rel="stylesheet" type="text/css" href="..\_css\my.css"></head><body>
<!-- Start Header -->
<div id="header">

<!-- Start Logo -->
<a id="logo" href="..\contents.html"><img src="..\_img\kohana.png" alt="Kohana"></a>
<!-- End Logo -->

</div>
<!-- End Header -->

<div class="menu clearfix">
<ul><li class="top active"><a href="..\contents.html">Contents</a></li>


<li class="top"><a href="..\contents.html">General<!--[if IE 7]><!--></a><!--<![endif]-->
<!--[if lte IE 6]><table><tr><td><![endif]-->
	<ul><li><a href="..\general\configuration.html" title="Configuration">Configuration</a></li>
				<li><a href="..\general\controllers.html" title="Controllers">Controllers</a></li>
				<li><a href="..\general\errorhandling.html" title="Error Handling">Error Handling</a></li>
				<li><a href="..\general\events.html" title="Events">Events</a></li>
				<li><a href="..\general\filesystem.html" title="Filesystem">Filesystem</a></li>
				<li><a href="..\general\helpers.html" title="Helpers">Helpers</a></li>
				<li><a href="..\general\hooks.html" title="Hooks">Hooks</a></li>
				<li><a href="..\general\i18n.html" title="Internationalization">Internationalization</a></li>
				<li><a href="..\general\libraries.html" title="Libraries">Libraries</a></li>
				<li><a href="..\general\loading.html" title="Loading">Loading</a></li>
				<li><a href="..\general\logging.html" title="Logging">Logging</a></li>
				<li><a href="..\general\models.html" title="Models">Models</a></li>
				<li><a href="..\general\modules.html" title="Modules">Modules</a></li>
				<li><a href="..\general\routing.html" title="Routing">Routing</a></li>
				<li><a href="..\general\urls.html" title="URLs">URLs</a></li>
				<li><a href="..\general\views.html" title="Views">Views</a></li>
			</ul><!--[if lte IE 6]></td></tr></table></a><![endif]--></li>


<li class="top"><a href="..\contents.html">Core<!--[if IE 7]><!--></a><!--<![endif]-->
<!--[if lte IE 6]><table><tr><td><![endif]-->
	<ul><li><a href="..\core\benchmark.html" title="Benchmark">Benchmark</a></li>
				<li><a href="..\core\config.html" title="Config">Config</a></li>
				<li><a href="..\core\event.html" title="Event">Event</a></li>
				<li><a href="..\core\kohana.html" title="Kohana">Kohana</a></li>
				<li><a href="..\core\log.html" title="Log">Log</a></li>
				<li><a href="..\core\utf8.html" title="Unicode">Unicode</a></li>
				<li><a href="..\core\view.html" title="View">View</a></li>
			</ul><!--[if lte IE 6]></td></tr></table></a><![endif]--></li>


<li class="top"><a href="..\contents.html">Libraries<!--[if IE 7]><!--></a><!--<![endif]-->
<!--[if lte IE 6]><table><tr><td><![endif]-->
	<ul><li><a href="..\libraries\cache.html" title="Cache">Cache</a></li>
				<li><a href="..\libraries\calendar.html" title="Calendar">Calendar</a></li>
				<li><a href="..\libraries\captcha.html" title="Captcha">Captcha</a></li>
				<li><a href="..\libraries\database.html" title="Database">Database</a></li>
				<li><a href="..\libraries\encrypt.html" title="Encrypt">Encrypt</a></li>
				<li><a href="..\libraries\image.html" title="Image">Image</a></li>
				<li><a href="..\libraries\input.html" title="Input">Input</a></li>
				<li><a href="..\libraries\orm.html" title="ORM">ORM</a></li>
				<li><a href="..\libraries\pagination.html" title="Pagination">Pagination</a></li>
				<li><a href="..\libraries\profiler.html" title="Profiler">Profiler</a></li>
				<li><a href="..\libraries\session.html" title="Session">Session</a></li>
				<li><a href="..\libraries\uri.html" title="URI">URI</a></li>
				<li><a href="..\libraries\validation.html" title="Validation">Validation</a></li>
			</ul><!--[if lte IE 6]></td></tr></table></a><![endif]--></li>


<li class="top"><a href="..\contents.html">Helpers<!--[if IE 7]><!--></a><!--<![endif]-->
<!--[if lte IE 6]><table><tr><td><![endif]-->
	<ul><li><a href="..\helpers\arr.html" title="Array">Array</a></li>
				<li><a href="..\helpers\cookie.html" title="Cookie">Cookie</a></li>
				<li><a href="..\helpers\date.html" title="Date">Date</a></li>
				<li><a href="..\helpers\download.html" title="Download">Download</a></li>
				<li><a href="..\helpers\email.html" title="Email">Email</a></li>
				<li><a href="..\helpers\expires.html" title="Expires">Expires</a></li>
				<li><a href="..\helpers\feed.html" title="Feed">Feed</a></li>
				<li><a href="..\helpers\file.html" title="File">File</a></li>
				<li><a href="..\helpers\form.html" title="Form">Form</a></li>
				<li><a href="..\helpers\format.html" title="Format">Format</a></li>
				<li><a href="..\helpers\html.html" title="HTML">HTML</a></li>
				<li><a href="..\helpers\inflector.html" title="Inflector">Inflector</a></li>
				<li><a href="..\helpers\num.html" title="Num">Num</a></li>
				<li><a href="..\helpers\remote.html" title="Remote">Remote</a></li>
				<li><a href="..\helpers\request.html" title="Request">Request</a></li>
				<li><a href="..\helpers\security.html" title="Security">Security</a></li>
				<li><a href="..\helpers\text.html" title="Text">Text</a></li>
				<li><a href="..\helpers\upload.html" title="Upload">Upload</a></li>
				<li><a href="..\helpers\url.html" title="URL">URL</a></li>
				<li><a href="..\helpers\valid.html" title="Valid">Valid</a></li>
			</ul><!--[if lte IE 6]></td></tr></table></a><![endif]--></li>


</ul></div>


<!-- Start Body -->
<div id="body" class="dokuwiki clearfix">

<!-- wikipage start -->
<!-- TOC START -->
<!-- TOC END -->
<table class="inline"><tr class="row0"><th class="col0">Status</th><td class="col1">Draft</td>
	</tr><tr class="row1"><th class="col0">Todo</th><td class="col1">Content Review and additions</td>
	</tr></table><h1><a name="deploying_kohana_to_production" id="deploying_kohana_to_production">Deploying Kohana to Production:</a></h1>
<div class="level1">

<p>
Here are a few items you should keep in mind before deploying your Kohana application to a production environment.
</p>

</div>

<h2><a name="remove_the_demo_and_example_controllers" id="remove_the_demo_and_example_controllers">1. Remove the demo and example controllers</a></h2>
<div class="level2">

<p>
Kohana comes with various demos and example controllers to help users when getting started.  Here are a few that should be removed:
</p>
<ul><li class="level1"><div class="li"> <code>application/controllers/examples.php</code></div>
</li>
<li class="level2"><div class="li"> <code>application/controllers/welcome.php</code> (if it is not used)</div>
</li>
<li class="level2"><div class="li"> <code>modules/auth/controllers/auth.php</code> (if enabled in $config['modules'])</div>
</li>
<li class="level2"><div class="li"> <code>modules/forge/controllers/forge_demo.php</code> (if enabled in $config['modules'])</div>
</li>
</ul></div>

<h2><a name="modify_your_configuration_files" id="modify_your_configuration_files">2. Modify your configuration files</a></h2>
<div class="level2">

<p>
Kohana provides various default configuration files in the <code>system/config</code> directory.  Since Kohana utilizes a <a href="..\general\filesystem.html" class="wikilink1" title="general:filesystem">cascading file system</a>, you have the option to either utilize the default configuration file versions or override these files with your own custom versions by creating a copy in the <code>application/config</code> directory.
</p>

<p>
Modify your <code>application/config/config.php</code>:
</p>
<ul><li class="level1"><div class="li"> change <code>$config['site_domain']</code> from your development setting to the production domain.</div>
</li>
<li class="level2"><div class="li"> set <code>$config['display_errors'] = FALSE;</code> to disable error messages from being displayed.  You can still check error messages in your log file. Check your settings in <code>config/log.php</code> to be sure.</div>
</li>
<li class="level2"><div class="li"> set your <code>$config['threshold'] = 1;</code>.  This sets your log threshold to a suitable level for production.  Higher threshold levels will log less critical notices and information, but can slow down your application.</div>
</li>
</ul><p>

You should always try to create custom versions of the following files:
</p>
<ul><li class="level1"><div class="li"> <code>system/config/routes.php</code> - set your <code>$config['_default']</code> to your default controller</div>
</li>
<li class="level2"><div class="li"> <code>system/config/encryption.php</code> - change the default <code>$config['key']</code></div>
</li>
<li class="level2"><div class="li"> <code>modules/auth/config/auth.php</code> - change the default salt offsets in <code>$config['salt_pattern']</code> <em>(if you use the Auth module)</em></div>
</li>
<li class="level2"><div class="li"> <code>system/config/cookie.php</code> - set your <code>$config['domain']</code></div>
</li>
<li class="level2"><div class="li"> <code>system/config/session.php</code> - set or verify <code>$config['driver']</code>, <code>$config['name']</code>, <code>$config['encryption']</code>, <code>$config['expiration']</code></div>
</li>
</ul><p>

You should also consider creating custom versions of the following files:
</p>
<ul><li class="level1"><div class="li"> <code>system/config/database.php</code> - configure your custom database connections (if required)</div>
</li>
</ul></div>

<h2><a name="move_kohana_core_directories_outside_of_the_document_root" id="move_kohana_core_directories_outside_of_the_document_root">3. Move Kohana core directories outside of the document root</a></h2>
<div class="level2">


<div class="box round">
  <b class="xtop"><b class="xb1"></b><b class="xb2"></b><b class="xb3"></b><b class="xb4"></b></b>
  <div class="xbox">
<div class="box_content"><p>
If your host does not allow this structure, <a href="..\contents.htmltutorials/remove_index.html" class="urlextern" title="http://kohanaphp.com/tutorials/remove_index.html" rel="nofollow">use an .htaccess file to protect the core directories</a>.
</p></div>
  </div>
  <b class="xbottom"><b class="xb4"></b><b class="xb3"></b><b class="xb2"></b><b class="xb1"></b></b>
</div>
<p>
Although this is an optional step and not required by Kohana, it is considered a good security practice to place as few files as possible in your public web server document root directory.  Since most web hosts give you access to at least one level above the web server document root, this should not be a problem.
</p>

<p>
Moving your core Kohana directories also gives you the ability to utilize one central Kohana codebase on your server that can be shared by multiple websites.  You could also create a set of common modules used across all of your web sites.
</p>

<p>
To accomplish this in Kohana, do the following:

</p>
<ol><li class="level1"><div class="li"> move your Kohana <code>system</code>, <code>application</code>, and <code>modules</code> directories at least one level above your document root directory (typically <code>public_html</code> or <code>www</code>).</div>
</li>
<li class="level2"><div class="li"> modify the following lines in your <code>index.php</code> file:   </div>
<ul><li class="level4"><div class="li"> <code>$kohana_application = '../application';</code></div>
</li>
<li class="level4"><div class="li"> <code>$kohana_modules = '../modules';</code></div>
</li>
<li class="level4"><div class="li"> <code>$kohana_system = '../system';</code></div>
</li>
</ul></li>
</ol><p>

<strong>Note:</strong> This example assumes one-level above <code>public_html</code>, however, you can use relative or absolute directories when specifying directory locations.
</p>

<p>
Your final directory structure will look similar to this:

</p>
<pre class="code">   yourdomain_root_directory
   +- application
   +- system
   +- modules
   +- public_html (web server document root)
    |    - index.php
    |    - .htaccess</pre>

</div>

<!-- wikipage stop -->

</div>
<!-- End Body -->


<div id="wikibar" class="clearfix">
	<div class="meta">
		<div class="user">
					</div>
		<div class="doc">
			installation/deployment.txt · Last modified: 2008/10/09 08:24 by neovive			 
		</div>
	</div>

	</div>

<div id="footer"><strong>©2007-2008 Kohana Team. All rights reserved.</strong></div>


<div class="no"><img src="/lib/exe/indexer.php?id=installation%3Adeployment&amp;1229411541" width="1" height="1" alt=""></div>
</body></html>
